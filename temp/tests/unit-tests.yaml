---
apiVersion: tekton.dev/v1beta1
kind: Task
metadata:
  name: unit-tests-task
spec:
  params:
    - name: continuous-delivery-context-secret
      description: name of the configmap containing the continuous delivery pipeline context secrets
      default: cd-secret
    - name: properties-file
      description: file containing properties out of containerize task
      default: build.properties
  workspaces:
    - name: workspace
      description: A workspace backing by a volume where the files (Dockerfile etc..) are expected to be
      mountPath: /artifacts
  steps:
    - name: run-unit-tests
      image: ibmcom/pipeline-base-image
      env:
        - name: PROPERTIES_FILE
          value: $(params.properties-file)
      command: ["/bin/bash", "-c"]
      args:
        - |
          echo "RUNNING TESTS"
